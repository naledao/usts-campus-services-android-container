import{f as R,i as Te,g as B,h as te,j as Y,n as H,m as M,k as F,l as C,p as x,u as de,q as ke,s as fe,d as h,t as me,H as U,v as V,x as K,y as pe,z as ye,A as we,C as Q,L as Oe,D as ae,E as Ce,F as W,G as oe,I as Ee,J as ve,K as Pe,M as Be,N as Se,_ as De,O as Ie,r as Re,o as le,c as $e,a as Ne,P as Ae,Q as Me,R as Z,e as He,B as Ve}from"./index-f76ea637.js";import{u as Le,v as Fe,P as Ue,D as Ke}from"./index-93d22e00.js";import{u as Ye,a as he,s as je,F as ze,C as qe,P as Ge}from"./index-d1477609.js";import{F as Je}from"./index-a88b428d.js";const[Qe,w,ie]=R("picker"),ge=e=>e.find(a=>!a.disabled)||e[0];function We(e,a){const t=e[0];if(t){if(Array.isArray(t))return"multiple";if(a.children in t)return"cascade"}return"default"}function L(e,a){a=te(a,0,e.length);for(let t=a;t<e.length;t++)if(!e[t].disabled)return t;for(let t=a-1;t>=0;t--)if(!e[t].disabled)return t;return 0}const ce=(e,a,t)=>a!==void 0&&e.some(r=>r[t.value]===a);function ne(e,a,t){const r=e.findIndex(i=>i[t.value]===a),l=L(e,r);return e[l]}function Ze(e,a,t){const r=[];let l={[a.children]:e},i=0;for(;l&&l[a.children];){const s=l[a.children],_=t.value[i];if(l=Te(_)?ne(s,_,a):void 0,!l&&s.length){const f=ge(s)[a.value];l=ne(s,f,a)}i++,r.push(s)}return r}function Xe(e){const{transform:a}=window.getComputedStyle(e),t=a.slice(7,a.length-1).split(", ")[5];return Number(t)}function et(e){return B({text:"text",value:"value",children:"children"},e)}const se=200,re=300,tt=15,[_e,X]=R("picker-column"),be=Symbol(_e);var nt=Y({name:_e,props:{value:H,fields:M(Object),options:F(),readonly:Boolean,allowHtml:Boolean,optionHeight:M(Number),swipeDuration:M(H),visibleOptionNum:M(H)},emits:["change","clickOption","scrollInto"],setup(e,{emit:a,slots:t}){let r,l,i,s,_;const f=C(),v=C(),u=C(0),g=C(0),k=Ye(),O=()=>e.options.length,E=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,p=c=>{let m=L(e.options,c);const n=-m*e.optionHeight,o=()=>{m>O()-1&&(m=L(e.options,c));const d=e.options[m][e.fields.value];d!==e.value&&a("change",d)};r&&n!==u.value?_=o:o(),u.value=n},b=()=>e.readonly||!e.options.length,z=c=>{r||b()||(_=null,g.value=se,p(c),a("clickOption",e.options[c]))},P=c=>te(Math.round(-c/e.optionHeight),0,O()-1),$=x(()=>P(u.value)),q=(c,m)=>{const n=Math.abs(c/m);c=u.value+n/.003*(c<0?-1:1);const o=P(c);g.value=+e.swipeDuration,p(o)},S=()=>{r=!1,g.value=0,_&&(_(),_=null)},G=c=>{if(!b()){if(k.start(c),r){const m=Xe(v.value);u.value=Math.min(0,m-E())}g.value=0,l=u.value,i=Date.now(),s=l,_=null}},J=c=>{if(b())return;k.move(c),k.isVertical()&&(r=!0,me(c,!0));const m=te(l+k.deltaY.value,-(O()*e.optionHeight),e.optionHeight),n=P(m);n!==$.value&&a("scrollInto",e.options[n]),u.value=m;const o=Date.now();o-i>re&&(i=o,s=m)},D=()=>{if(b())return;const c=u.value-s,m=Date.now()-i;if(m<re&&Math.abs(c)>tt){q(c,m);return}const o=P(u.value);g.value=se,p(o),setTimeout(()=>{r=!1},0)},N=()=>{const c={height:`${e.optionHeight}px`};return e.options.map((m,n)=>{const o=m[e.fields.text],{disabled:d}=m,A=m[e.fields.value],I={role:"button",style:c,tabindex:d?-1:0,class:[X("item",{disabled:d,selected:A===e.value}),m.className],onClick:()=>z(n)},xe={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:o};return h("li",I,[t.option?t.option(m,n):h("div",xe,null)])})};return de(be),he({stopMomentum:S}),ke(()=>{const c=r?Math.floor(-u.value/e.optionHeight):e.options.findIndex(o=>o[e.fields.value]===e.value),m=L(e.options,c),n=-m*e.optionHeight;r&&m<c&&S(),u.value=n}),fe("touchmove",J,{target:f}),()=>h("div",{ref:f,class:X(),onTouchstartPassive:G,onTouchend:D,onTouchcancel:D},[h("ul",{ref:v,style:{transform:`translate3d(0, ${u.value+E()}px, 0)`,transitionDuration:`${g.value}ms`,transitionProperty:g.value?"all":"none"},class:X("wrapper"),onTransitionend:S},[N()])])}});const[at]=R("picker-toolbar"),j={title:String,cancelButtonText:String,confirmButtonText:String},ot=["cancel","confirm","title","toolbar"],lt=Object.keys(j);var it=Y({name:at,props:j,emits:["confirm","cancel"],setup(e,{emit:a,slots:t}){const r=()=>{if(t.title)return t.title();if(e.title)return h("div",{class:[w("title"),"van-ellipsis"]},[e.title])},l=()=>a("cancel"),i=()=>a("confirm"),s=()=>{var f;const v=(f=e.cancelButtonText)!=null?f:ie("cancel");if(!(!t.cancel&&!v))return h("button",{type:"button",class:[w("cancel"),U],onClick:l},[t.cancel?t.cancel():v])},_=()=>{var f;const v=(f=e.confirmButtonText)!=null?f:ie("confirm");if(!(!t.confirm&&!v))return h("button",{type:"button",class:[w("confirm"),U],onClick:i},[t.confirm?t.confirm():v])};return()=>h("div",{class:w("toolbar")},[t.toolbar?t.toolbar():[s(),r(),_()]])}});const[ct,Et]=R("picker-group"),st=Symbol(ct);B({tabs:F(),activeTab:V(0),nextStepText:String,showToolbar:K},j);const rt=B({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:V(44),showToolbar:K,swipeDuration:V(1e3),visibleOptionNum:V(6)},j),ut=B({},rt,{columns:F(),modelValue:F(),toolbarPosition:pe("top"),columnsFieldNames:Object});var dt=Y({name:Qe,props:ut,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:a,slots:t}){const r=C(),l=C(e.modelValue.slice(0)),{parent:i}=de(st),{children:s,linkChildren:_}=ye(be);_();const f=x(()=>et(e.columnsFieldNames)),v=x(()=>we(e.optionHeight)),u=x(()=>We(e.columns,f.value)),g=x(()=>{const{columns:n}=e;switch(u.value){case"multiple":return n;case"cascade":return Ze(n,f.value,l);default:return[n]}}),k=x(()=>g.value.some(n=>n.length)),O=x(()=>g.value.map((n,o)=>ne(n,l.value[o],f.value))),E=x(()=>g.value.map((n,o)=>n.findIndex(d=>d[f.value.value]===l.value[o]))),p=(n,o)=>{if(l.value[n]!==o){const d=l.value.slice(0);d[n]=o,l.value=d}},b=()=>({selectedValues:l.value.slice(0),selectedOptions:O.value,selectedIndexes:E.value}),z=(n,o)=>{p(o,n),u.value==="cascade"&&l.value.forEach((d,A)=>{const I=g.value[A];ce(I,d,f.value)||p(A,I.length?I[0][f.value.value]:void 0)}),oe(()=>{a("change",B({columnIndex:o},b()))})},P=(n,o)=>{const d={columnIndex:o,currentOption:n};a("clickOption",B(b(),d)),a("scrollInto",d)},$=()=>{s.forEach(o=>o.stopMomentum());const n=b();return oe(()=>{const o=b();a("confirm",o)}),n},q=()=>a("cancel",b()),S=()=>g.value.map((n,o)=>h(nt,{value:l.value[o],fields:f.value,options:n,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:v.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:d=>z(d,o),onClickOption:d=>P(d,o),onScrollInto:d=>{a("scrollInto",{currentOption:d,columnIndex:o})}},{option:t.option})),G=n=>{if(k.value){const o={height:`${v.value}px`},d={backgroundSize:`100% ${(n-v.value)/2}px`};return[h("div",{class:w("mask"),style:d},null),h("div",{class:[Ee,w("frame")],style:o},null)]}},J=()=>{const n=v.value*+e.visibleOptionNum,o={height:`${n}px`};return!e.loading&&!k.value&&t.empty?t.empty():h("div",{ref:r,class:w("columns"),style:o},[S(),G(n)])},D=()=>{if(e.showToolbar&&!i)return h(it,Ce(ae(e,lt),{onConfirm:$,onCancel:q}),ae(t,ot))},N=n=>{n.forEach((o,d)=>{o.length&&!ce(o,l.value[d],f.value)&&p(d,ge(o)[f.value.value])})};Q(g,n=>N(n),{immediate:!0});let c;return Q(()=>e.modelValue,n=>{!W(n,l.value)&&!W(n,c)&&(l.value=n.slice(0),c=n.slice(0)),e.modelValue.length===0&&N(g.value)},{deep:!0}),Q(l,n=>{W(n,e.modelValue)||(c=n.slice(0),a("update:modelValue",c))},{immediate:!0}),fe("touchmove",me,{target:r}),he({confirm:$,getSelectedOptions:()=>O.value}),()=>{var n,o;return h("div",{class:w()},[e.toolbarPosition==="top"?D():null,e.loading?h(Oe,{class:w("loading")},null):null,(n=t["columns-top"])==null?void 0:n.call(t),J(),(o=t["columns-bottom"])==null?void 0:o.call(t),e.toolbarPosition==="bottom"?D():null])}}});const ft=ve(dt),[mt,y]=R("nav-bar"),vt={title:String,fixed:Boolean,zIndex:H,border:K,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:K};var ht=Y({name:mt,props:vt,emits:["clickLeft","clickRight"],setup(e,{emit:a,slots:t}){const r=C(),l=Le(r,y),i=u=>{e.leftDisabled||a("clickLeft",u)},s=u=>{e.rightDisabled||a("clickRight",u)},_=()=>t.left?t.left():[e.leftArrow&&h(Be,{class:y("arrow"),name:"arrow-left"},null),e.leftText&&h("span",{class:y("text")},[e.leftText])],f=()=>t.right?t.right():h("span",{class:y("text")},[e.rightText]),v=()=>{const{title:u,fixed:g,border:k,zIndex:O}=e,E=Se(O),p=e.leftArrow||e.leftText||t.left,b=e.rightText||t.right;return h("div",{ref:r,style:E,class:[y({fixed:g}),{[Pe]:k,"van-safe-area-top":e.safeAreaInsetTop}]},[h("div",{class:y("content")},[p&&h("div",{class:[y("left",{disabled:e.leftDisabled}),e.clickable&&!e.leftDisabled?U:""],onClick:i},[_()]),h("div",{class:[y("title"),"van-ellipsis"]},[t.title?t.title():u]),b&&h("div",{class:[y("right",{disabled:e.rightDisabled}),e.clickable&&!e.rightDisabled?U:""],onClick:s},[f()])])])};return()=>e.fixed&&e.placeholder?l(v):v()}});const gt=ve(ht),_t="modulepreload",bt=function(e){return"/"+e},ue={},ee=function(a,t,r){if(!t||t.length===0)return a();const l=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=bt(i),i in ue)return;ue[i]=!0;const s=i.endsWith(".css"),_=s?'[rel="stylesheet"]':"";if(!!r)for(let u=l.length-1;u>=0;u--){const g=l[u];if(g.href===i&&(!s||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${_}`))return;const v=document.createElement("link");if(v.rel=s?"stylesheet":_t,s||(v.as="script",v.crossOrigin=""),v.href=i,document.head.appendChild(v),s)return new Promise((u,g)=>{v.addEventListener("load",u),v.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>a()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};const xt={class:"page"},Tt={class:"content"},kt={__name:"App",setup(e){const a=new URLSearchParams(window.location.search),t=C(a.get("code")||""),r=x(()=>{switch(t.value){case"campus_net_login":return"创建服务 · 校园网自动登录";case"ac_repair":return"创建服务 · 空调报修(示例)";default:return"创建服务"}}),l=x(()=>{const s=t.value;return s==="campus_net_login"?Z(()=>ee(()=>import("./CampusNetLoginCreate-abf35fb2.js"),["assets/CampusNetLoginCreate-abf35fb2.js","assets/index-d1477609.js","assets/index-f76ea637.js","assets/index-0f5ee149.css","assets/index-36a89aa5.css","assets/CampusNetLoginCreate-7449aaa1.css"])):s==="ac_repair"?Z(()=>ee(()=>import("./UnknownService-959567ee.js"),["assets/UnknownService-959567ee.js","assets/index-f76ea637.js","assets/index-0f5ee149.css"])):Z(()=>ee(()=>import("./UnknownService-959567ee.js"),["assets/UnknownService-959567ee.js","assets/index-f76ea637.js","assets/index-0f5ee149.css"]))});function i(){window.history.length>1?window.history.back():window.location.href="/index.html"}return Ie(async()=>{await Fe(),t.value||je("缺少服务代号")}),(s,_)=>{const f=Re("van-nav-bar");return le(),$e("div",xt,[h(f,{title:r.value,"left-text":"返回","left-arrow":"",onClickLeft:i},null,8,["title"]),Ne("section",Tt,[(le(),Ae(Me(l.value)))])])}}},pt=De(kt,[["__scopeId","data-v-f5bc574e"]]);const T=He(pt);T.use(gt);T.use(Ve);T.use(Je);T.use(ze);T.use(qe);T.use(Ue);T.use(Ge);T.use(ft);T.use(Ke);T.mount("#app");
