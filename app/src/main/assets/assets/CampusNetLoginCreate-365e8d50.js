import{S as A}from"./ServiceCampusNetLoginController-72a73e7b.js";import{L}from"./LocalController-689e9c2c.js";import{_ as N,f as m,a6 as S,r,o as h,c as B,a as l,d as a,w as i,b as v,U as T}from"./index-3fbeb961.js";import{s,g as $}from"./index-17b9c811.js";const F={class:"page"},z={class:"ip-field__btn-wrap"},E={__name:"CampusNetLoginCreate",setup(O){const c=m(!1),t=S({netAccount:void 0,carrier:void 0,netPassword:void 0,wlanUserIp:void 0});async function _(){try{if(!t.netAccount)return s("è¯·è¾“å…¥æ ¡å›­ç½‘è´¦å·");if(!t.netPassword)return s("è¯·è¾“å…¥æ ¡å›­ç½‘å¯†ç ");if(!t.carrier)return s("è¯·é€‰æ‹©è¿è¥å•†");if(!t.wlanUserIp)return s("è¯·è¾“å…¥è®¾å¤‡ip");try{const n=await A.create({netAccount:t.netAccount,carrier:C(t.carrier),netPassword:t.netPassword,wlanUserIp:t.wlanUserIp},{loading:"åˆ›å»ºä¸­"});s((n==null?void 0:n.message)||"åˆ›å»ºæˆåŠŸ")}finally{loading.close()}}catch{}}const u=m(!1),w=[{text:"ä¸­å›½ç§»åŠ¨",value:"ä¸­å›½ç§»åŠ¨"},{text:"ä¸­å›½è”é€š",value:"ä¸­å›½è”é€š"},{text:"ä¸­å›½ç”µä¿¡",value:"ä¸­å›½ç”µä¿¡"}];function g(n){const e=Array.isArray(n==null?void 0:n.selectedValues)?n.selectedValues[0]:n;t.carrier=e,u.value=!1}const C=n=>({ä¸­å›½ç§»åŠ¨:"cmcc",ä¸­å›½è”é€š:"unicom",ä¸­å›½ç”µä¿¡:"telecom"})[n]||n;async function b(){var e;const n=await L.getCampusIp();return((e=n==null?void 0:n.data)==null?void 0:e.data)||""}const d=m(!1);function I(){d.value=!0}async function y(){const n=$({message:"è·å–ä¸­â€¦",forbidClick:!0,duration:0});try{const e=await b();e?(t.wlanUserIp=e,s("å·²è·å–åˆ°è®¾å¤‡ IP")):s("æœªèƒ½è‡ªåŠ¨è·å–ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥")}catch{s("æœªèƒ½è‡ªåŠ¨è·å–ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥")}finally{n.close(),d.value=!1}}return(n,e)=>{const p=r("van-field"),V=r("van-picker"),P=r("van-popup"),f=r("van-button"),U=r("van-cell-group"),x=r("van-form"),k=r("van-dialog");return h(),B(T,null,[l("div",F,[a(x,{class:"form",onSubmit:_},{default:i(()=>[a(U,{class:"cell-group"},{default:i(()=>[a(p,{modelValue:t.netAccount,"onUpdate:modelValue":e[0]||(e[0]=o=>t.netAccount=o),name:"netAccount",label:"æ ¡å›­ç½‘è´¦å·",placeholder:"è¯·è¾“å…¥è´¦å·",clearable:""},null,8,["modelValue"]),a(p,{modelValue:t.carrier,"onUpdate:modelValue":e[1]||(e[1]=o=>t.carrier=o),name:"carrier",label:"è¿è¥å•†",placeholder:"è¯·é€‰æ‹©è¿è¥å•†","is-link":"",readonly:"",onClick:e[2]||(e[2]=o=>u.value=!0)},null,8,["modelValue"]),a(P,{show:u.value,"onUpdate:show":e[4]||(e[4]=o=>u.value=o),round:"",position:"bottom"},{default:i(()=>[a(V,{columns:w,"show-toolbar":"",title:"é€‰æ‹©è¿è¥å•†",onConfirm:g,onCancel:e[3]||(e[3]=o=>u.value=!1)})]),_:1},8,["show"]),a(p,{modelValue:t.netPassword,"onUpdate:modelValue":e[5]||(e[5]=o=>t.netPassword=o),type:c.value?"text":"password",name:"netPassword",label:"æ ¡å›­ç½‘å¯†ç ",placeholder:"è¯·è¾“å…¥å¯†ç ",clearable:"","right-icon":c.value?"eye-o":"eye",onClickRightIcon:e[6]||(e[6]=o=>c.value=!c.value)},null,8,["modelValue","type","right-icon"]),a(p,{modelValue:t.wlanUserIp,"onUpdate:modelValue":e[7]||(e[7]=o=>t.wlanUserIp=o),name:"wlanUserIp",label:"è®¾å¤‡IP",placeholder:"è¯·è¾“å…¥è”ç½‘è®¾å¤‡çš„IP",clearable:"",class:"ip-field"},{button:i(()=>[l("div",z,[a(f,{class:"ip-field__btn",type:"primary",size:"small",onClick:I},{default:i(()=>[...e[9]||(e[9]=[v(" ä¸€é”®è·å– ",-1)])]),_:1})])]),_:1},8,["modelValue"]),a(f,{style:{"margin-top":"12px"},round:"",block:"",type:"primary","native-type":"submit"},{default:i(()=>[...e[10]||(e[10]=[v(" åˆ›å»º ",-1)])]),_:1})]),_:1})]),_:1})]),a(k,{show:d.value,"onUpdate:show":e[8]||(e[8]=o=>d.value=o),class:"ip-dialog",theme:"round-button",title:"å‡†å¤‡è·å– IP","show-cancel-button":"","cancel-button-text":"å–æ¶ˆ","confirm-button-text":"å·²è¿æ¥",onConfirm:y},{default:i(()=>[...e[11]||(e[11]=[l("div",{class:"ip-dialog__content"},[l("div",{class:"ip-dialog__icon"},"ğŸ“¶"),l("div",{class:"ip-dialog__text"}," åœ¨ä¸€é”®è·å– IP ä¹‹å‰ï¼Œè¯·å…ˆç¡®ä¿æœ¬è®¾å¤‡å·²è¿æ¥åˆ°æ¥å…¥æ ¡å›­ç½‘çš„è·¯ç”±å™¨ã€‚ "),l("ul",{class:"ip-dialog__list"},[l("li",null,"ç¡®ä¿ Wi-Fi å·²è¿æ¥æ ¡å›­ç½‘"),l("li",null,"å»ºè®®å…³é—­ç§»åŠ¨æ•°æ®é¿å…å¹²æ‰°"),l("li",null,"ä¸è·¯ç”±å™¨åœ¨åŒä¸€ç½‘æ®µ")])],-1)])]),_:1},8,["show"])],64)}}},D=N(E,[["__scopeId","data-v-cce1931a"]]);export{D as default};
