import{h as N,i as h,s as r,j as B}from"./index-d1477609.js";import{_ as S,a6 as T,l as f,r as s,o as $,c as F,a as l,d as a,w as i,b as _,V as j}from"./index-f76ea637.js";class z{static create(n){return N.post("/api/service-campus-net-login/create",n)}}var p,w;const E=((w=(p=window.AndroidApi)==null?void 0:p.getPort)==null?void 0:w.call(p))??"10089",O=h.create({baseURL:"http://127.0.0.1:"+E});class R{static getCampusIp(){return O.get("/ip/get")}}const W={style:{margin:"16px"}},q={__name:"CampusNetLoginCreate",setup(m){const n=T({netAccount:void 0,carrier:void 0,netPassword:void 0,wlanUserIp:void 0});async function b(){try{if(!n.netAccount)return r("è¯·è¾“å…¥æ ¡å›­ç½‘è´¦å·");if(!n.netPassword)return r("è¯·è¾“å…¥æ ¡å›­ç½‘å¯†ç ");if(!n.carrier)return r("è¯·é€‰æ‹©è¿è¥å•†");if(!n.wlanUserIp)return r("è¯·è¾“å…¥è®¾å¤‡ip");const t=await z.create({netAccount:n.netAccount,carrier:I(n.carrier),netPassword:n.netPassword,wlanUserIp:n.wlanUserIp});r((t==null?void 0:t.message)||"åˆ›å»ºæˆåŠŸ")}catch{}}const u=f(!1),g=[{text:"ä¸­å›½ç§»åŠ¨",value:"ä¸­å›½ç§»åŠ¨"},{text:"ä¸­å›½è”é€š",value:"ä¸­å›½è”é€š"},{text:"ä¸­å›½ç”µä¿¡",value:"ä¸­å›½ç”µä¿¡"}];function C(t){const e=Array.isArray(t==null?void 0:t.selectedValues)?t.selectedValues[0]:t;n.carrier=e,u.value=!1}const I=t=>({ä¸­å›½ç§»åŠ¨:"cmcc",ä¸­å›½è”é€š:"unicom",ä¸­å›½ç”µä¿¡:"telecom"})[t]||t;async function V(){var e;const t=await R.getCampusIp();return((e=t==null?void 0:t.data)==null?void 0:e.data)||""}const d=f(!1);function P(){d.value=!0}async function U(){B({message:"è·å–ä¸­...",forbidClick:!0,duration:0});try{const t=await V();t?(n.wlanUserIp=t,r("å·²è·å–åˆ°è®¾å¤‡ IP")):r("æœªèƒ½è‡ªåŠ¨è·å–ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥")}catch{r("æœªèƒ½è‡ªåŠ¨è·å–ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥")}}return(t,e)=>{const c=s("van-field"),x=s("van-picker"),y=s("van-popup"),v=s("van-button"),A=s("van-cell-group"),k=s("van-form"),L=s("van-dialog");return $(),F(j,null,[l("div",null,[a(k,{onSubmit:b},{default:i(()=>[a(A,{inset:""},{default:i(()=>[a(c,{modelValue:n.netAccount,"onUpdate:modelValue":e[0]||(e[0]=o=>n.netAccount=o),name:"netAccount",label:"æ ¡å›­ç½‘è´¦å·",placeholder:"è¯·è¾“å…¥è´¦å·",clearable:""},null,8,["modelValue"]),a(c,{modelValue:n.carrier,"onUpdate:modelValue":e[1]||(e[1]=o=>n.carrier=o),name:"carrier",label:"è¿è¥å•†",placeholder:"è¯·é€‰æ‹©è¿è¥å•†","is-link":"",readonly:"",onClick:e[2]||(e[2]=o=>u.value=!0)},null,8,["modelValue"]),a(y,{show:u.value,"onUpdate:show":e[4]||(e[4]=o=>u.value=o),round:"",position:"bottom"},{default:i(()=>[a(x,{columns:g,"show-toolbar":"",onConfirm:C,title:"é€‰æ‹©è¿è¥å•†",onCancel:e[3]||(e[3]=o=>u.value=!1)})]),_:1},8,["show"]),a(c,{modelValue:n.netPassword,"onUpdate:modelValue":e[5]||(e[5]=o=>n.netPassword=o),type:"password",name:"netPassword",label:"æ ¡å›­ç½‘å¯†ç ",placeholder:"è¯·è¾“å…¥å¯†ç ",clearable:""},null,8,["modelValue"]),a(c,{modelValue:n.wlanUserIp,"onUpdate:modelValue":e[6]||(e[6]=o=>n.wlanUserIp=o),name:"wlanUserIp",label:"è®¾å¤‡IP",placeholder:"è¯·è¾“å…¥è”ç½‘è®¾å¤‡çš„IP",clearable:""},{button:i(()=>[a(v,{size:"small",type:"primary",onClick:P},{default:i(()=>[...e[8]||(e[8]=[_("ä¸€é”®è·å–",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l("div",W,[a(v,{round:"",block:"",type:"primary","native-type":"submit"},{default:i(()=>[...e[9]||(e[9]=[_("åˆ›å»º",-1)])]),_:1})])]),_:1})]),a(L,{show:d.value,"onUpdate:show":e[7]||(e[7]=o=>d.value=o),class:"ip-dialog",theme:"round-button",title:"å‡†å¤‡è·å– IP","show-cancel-button":"","cancel-button-text":"å–æ¶ˆ","confirm-button-text":"å·²è¿æ¥",onConfirm:U},{default:i(()=>[...e[10]||(e[10]=[l("div",{class:"ip-dialog__content"},[l("div",{class:"ip-dialog__icon"},"ğŸ“¶"),l("div",{class:"ip-dialog__text"}," åœ¨ä¸€é”®è·å– IP ä¹‹å‰ï¼Œè¯·å…ˆç¡®ä¿æœ¬è®¾å¤‡å·²è¿æ¥åˆ°æ¥å…¥æ ¡å›­ç½‘çš„è·¯ç”±å™¨ã€‚ "),l("ul",{class:"ip-dialog__list"},[l("li",null,"ç¡®ä¿ Wiâ€‘Fi å·²è¿æ¥æ ¡å›­ç½‘"),l("li",null,"å»ºè®®å…³é—­ç§»åŠ¨æ•°æ®é¿å…å¹²æ‰°"),l("li",null,"ä¸è·¯ç”±å™¨åœ¨åŒä¸€ç½‘æ®µ")])],-1)])]),_:1},8,["show"])],64)}}},H=S(q,[["__scopeId","data-v-527b0b58"]]);export{H as default};
